<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>Connection | klf-200-api</title><meta name="description" content="Documentation for klf-200-api"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base=".."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">klf-200-api</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">klf-200-api</a></li><li><a href="Connection.html">Connection</a></li></ul><h1>Class Connection</h1></div><section class="tsd-panel tsd-comment"><div class="tsd-comment tsd-typography"><p>The Connection class is used to handle the communication with the Velux KLF interface.
It provides login and logout functionality and provides methods to run other commands
on the socket API.</p>
<pre><code><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-9">Connection</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;velux-api&#39;</span><span class="hl-1">).</span><span class="hl-0">Connection</span><span class="hl-1">;</span><br/><br/><span class="hl-5">let</span><span class="hl-1"> </span><span class="hl-0">conn</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-3">Connection</span><span class="hl-1">(</span><span class="hl-4">&#39;velux-klf-12ab&#39;</span><span class="hl-1">);</span><br/><span class="hl-0">conn</span><span class="hl-1">.</span><span class="hl-3">loginAsync</span><span class="hl-1">(</span><span class="hl-4">&#39;velux123&#39;</span><span class="hl-1">)</span><br/><span class="hl-1">    .</span><span class="hl-3">then</span><span class="hl-1">(() </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">        ... </span><span class="hl-7">do</span><span class="hl-1"> </span><span class="hl-0">some</span><span class="hl-1"> </span><span class="hl-0">other</span><span class="hl-1"> </span><span class="hl-0">stuff</span><span class="hl-1"> ...</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">conn</span><span class="hl-1">.</span><span class="hl-3">logoutAsync</span><span class="hl-1">();</span><br/><span class="hl-1">     })</span><br/><span class="hl-1">    .</span><span class="hl-3">catch</span><span class="hl-1">((</span><span class="hl-0">err</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {    </span><span class="hl-8">// always close the connection</span><br/><span class="hl-1">        </span><span class="hl-7">return</span><span class="hl-1"> </span><span class="hl-0">conn</span><span class="hl-1">.</span><span class="hl-3">logoutAsync</span><span class="hl-1">().</span><span class="hl-3">reject</span><span class="hl-1">(</span><span class="hl-0">err</span><span class="hl-1">);</span><br/><span class="hl-1">     });</span>
</code><button>Copy</button></pre>
</div><div class="tsd-comment tsd-typography"><h4>Export</h4><p>Connection</p>
</div></section><section class="tsd-panel"><h4>Implements</h4><ul class="tsd-hierarchy"><li><a href="../interfaces/IConnection.html" class="tsd-signature-type tsd-kind-interface">IConnection</a></li></ul></section><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L133">connection.ts:133</a></li></ul></aside><section class="tsd-panel-group tsd-index-group"><section class="tsd-panel tsd-index-panel"><details class="tsd-index-content tsd-index-accordion" open><summary class="tsd-accordion-summary tsd-index-summary"><h5 class="tsd-index-heading uppercase" role="button" aria-expanded="false" tabIndex="0"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="../assets/icons.svg#icon-chevronSmall"></use></svg> Index</h5></summary><div class="tsd-accordion-details"><section class="tsd-index-section"><h3 class="tsd-index-heading">Constructors</h3><div class="tsd-index-list"><a href="Connection.html#constructor" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Properties</h3><div class="tsd-index-list"><a href="Connection.html#CA" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>CA</span></a>
<a href="Connection.html#connectionOptions" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>connection<wbr/>Options?</span></a>
<a href="Connection.html#fingerprint" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>fingerprint</span></a>
<a href="Connection.html#host" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>host</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Accessors</h3><div class="tsd-index-list"><a href="Connection.html#KLF200SocketProtocol" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>KLF200<wbr/>Socket<wbr/>Protocol</span></a>
</div></section><section class="tsd-index-section"><h3 class="tsd-index-heading">Methods</h3><div class="tsd-index-list"><a href="Connection.html#loginAsync" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>login<wbr/>Async</span></a>
<a href="Connection.html#logoutAsync" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>logout<wbr/>Async</span></a>
<a href="Connection.html#on" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>on</span></a>
<a href="Connection.html#onFrameSent" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>on<wbr/>Frame<wbr/>Sent</span></a>
<a href="Connection.html#sendFrameAsync" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>send<wbr/>Frame<wbr/>Async</span></a>
<a href="Connection.html#startKeepAlive" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>start<wbr/>Keep<wbr/>Alive</span></a>
<a href="Connection.html#stopKeepAlive" class="tsd-index-link"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>stop<wbr/>Keep<wbr/>Alive</span></a>
</div></section></div></details></section></section><section class="tsd-panel-group tsd-member-group"><h2>Constructors</h2><section class="tsd-panel tsd-member"><a id="constructor" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>constructor</span><a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_Connection" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr/>Connection</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">host</span>, <span class="tsd-kind-parameter">CA</span><span class="tsd-signature-symbol">?</span>, <span class="tsd-kind-parameter">fingerprint</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="Connection.html" class="tsd-signature-type tsd-kind-class">Connection</a><a href="#constructor.new_Connection" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a new connection object that connect to the given host.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">host</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>Host name or IP address of the KLF-200 interface.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">CA</span>: <span class="tsd-signature-type">Buffer</span></span><div class="tsd-comment tsd-typography"><p>A buffer with a certificate of the certificate authority.
                        Currently, the interface uses a self-signed certificate
                        thus a certificate has to be provided for the CA.
                        This parameter is optional and in case the certificate
                        will be changed with subsequent firmware updates you can
                        provide the matching certificate with this parameter.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">fingerprint</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>The fingerprint of the certificate. This parameter is optional.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="Connection.html" class="tsd-signature-type tsd-kind-class">Connection</a></h4><div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L154">connection.ts:154</a></li></ul></aside></li><li class="tsd-signature tsd-anchor-link"><a id="constructor.new_Connection-1" class="tsd-anchor"></a><span class="tsd-kind-constructor-signature">new <wbr/>Connection</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">host</span>, <span class="tsd-kind-parameter">connectionOptions</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="Connection.html" class="tsd-signature-type tsd-kind-class">Connection</a><a href="#constructor.new_Connection-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Creates a new connection object that connect to the given host.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">host</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>Host name or IP address of the KLF-200 interface.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><span class="tsd-kind-parameter">connectionOptions</span>: <span class="tsd-signature-type">ConnectionOptions</span></span><div class="tsd-comment tsd-typography"><p>Options that will be provided to the connect method of the TLS socket.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="Connection.html" class="tsd-signature-type tsd-kind-class">Connection</a></h4><div class="tsd-comment tsd-typography"></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L160">connection.ts:160</a></li></ul></aside></li></ul></section></section><section class="tsd-panel-group tsd-member-group"><h2>Properties</h2><section class="tsd-panel tsd-member"><a id="CA" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagReadonly">Readonly</code> <span>CA</span><a href="#CA" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">CA</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">Buffer</span><span class="tsd-signature-symbol"> = ca</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L138">connection.ts:138</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="connectionOptions" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagOptional">Optional</code> <code class="tsd-tag ts-flagReadonly">Readonly</code> <span>connection<wbr/>Options</span><a href="#connectionOptions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">connection<wbr/>Options</span><span class="tsd-signature-symbol">?:</span> <span class="tsd-signature-type">ConnectionOptions</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L140">connection.ts:140</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="fingerprint" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagReadonly">Readonly</code> <span>fingerprint</span><a href="#fingerprint" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">fingerprint</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span><span class="tsd-signature-symbol"> = FINGERPRINT</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L139">connection.ts:139</a></li></ul></aside></section><section class="tsd-panel tsd-member"><a id="host" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><code class="tsd-tag ts-flagReadonly">Readonly</code> <span>host</span><a href="#host" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><div class="tsd-signature"><span class="tsd-kind-property">host</span><span class="tsd-signature-symbol">:</span> <span class="tsd-signature-type">string</span></div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L137">connection.ts:137</a></li></ul></aside></section></section><section class="tsd-panel-group tsd-member-group"><h2>Accessors</h2><section class="tsd-panel tsd-member"><a id="KLF200SocketProtocol" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>KLF200<wbr/>Socket<wbr/>Protocol</span><a href="#KLF200SocketProtocol" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature" id="KLF200SocketProtocol.KLF200SocketProtocol-1"><span class="tsd-signature-keyword">get</span> KLF200SocketProtocol<span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="KLF200SocketProtocol.html" class="tsd-signature-type tsd-kind-class">KLF200SocketProtocol</a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Gets the [[KLF200SocketProtocol]] object used by this connection.
This property has a value after calling [[loginAsync]], only.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">undefined</span><span class="tsd-signature-symbol"> | </span><a href="KLF200SocketProtocol.html" class="tsd-signature-type tsd-kind-class">KLF200SocketProtocol</a></h4><div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/IConnection.html">IConnection</a>.<a href="../interfaces/IConnection.html#KLF200SocketProtocol">KLF200SocketProtocol</a></p><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L182">connection.ts:182</a></li></ul></aside></li></ul></section></section><section class="tsd-panel-group tsd-member-group"><h2>Methods</h2><section class="tsd-panel tsd-member"><a id="loginAsync" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>login<wbr/>Async</span><a href="#loginAsync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="loginAsync.loginAsync-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">login<wbr/>Async</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">password</span>, <span class="tsd-kind-parameter">timeout</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#loginAsync.loginAsync-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Logs in to the KLF interface by sending the GW_PASSWORD_ENTER_REQ.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">password</span>: <span class="tsd-signature-type">string</span></span><div class="tsd-comment tsd-typography"><p>The password needed for login. The factory default password is velux123.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">timeout</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 60</span></span><div class="tsd-comment tsd-typography"><p>A timeout in seconds. After the timeout the returned promise will be rejected.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Returns a promise that resolves to true on success or rejects with the errors.</p>
<div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/IConnection.html">IConnection</a>.<a href="../interfaces/IConnection.html#loginAsync">loginAsync</a></p><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L220">connection.ts:220</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="logoutAsync" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>logout<wbr/>Async</span><a href="#logoutAsync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="logoutAsync.logoutAsync-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">logout<wbr/>Async</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">timeout</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span><a href="#logoutAsync.logoutAsync-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Logs out from the KLF interface and closes the socket.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">timeout</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 10</span></span><div class="tsd-comment tsd-typography"><p>A timeout in seconds. After the timeout the returned promise will be rejected.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><span class="tsd-signature-type">void</span><span class="tsd-signature-symbol">&gt;</span></h4><p>Returns a promise that resolves to true on successful logout or rejects with the errors.</p>
<div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/IConnection.html">IConnection</a>.<a href="../interfaces/IConnection.html#logoutAsync">logoutAsync</a></p><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L235">connection.ts:235</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="on" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>on</span><a href="#on" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="on.on-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">on</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">handler</span>, <span class="tsd-kind-parameter">filter</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/Disposable.html" class="tsd-signature-type tsd-kind-interface">Disposable</a><a href="#on.on-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Add a handler to listen for confirmations and notification.
You can provide an optional filter to listen only to
specific events.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">handler</span>: <a href="../interfaces/Listener.html" class="tsd-signature-type tsd-kind-interface">Listener</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IGW_FRAME_RCV.html" class="tsd-signature-type tsd-kind-interface">IGW_FRAME_RCV</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>Callback functions that is called for an event</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">filter</span>: <a href="../enums/GatewayCommand.html" class="tsd-signature-type tsd-kind-enum">GatewayCommand</a><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>Array of GatewayCommand entries you want to listen to. Optional.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/Disposable.html" class="tsd-signature-type tsd-kind-interface">Disposable</a></h4><p>Returns a Disposable that you can call to remove the handler.</p>
<div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/IConnection.html">IConnection</a>.<a href="../interfaces/IConnection.html#on">on</a></p><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L358">connection.ts:358</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="onFrameSent" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>on<wbr/>Frame<wbr/>Sent</span><a href="#onFrameSent" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="onFrameSent.onFrameSent-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">on<wbr/>Frame<wbr/>Sent</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">handler</span>, <span class="tsd-kind-parameter">filter</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><a href="../interfaces/Disposable.html" class="tsd-signature-type tsd-kind-interface">Disposable</a><a href="#onFrameSent.onFrameSent-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Add a handler to listen for sent frames.
You can provide an optional filter to listen only to
specific events.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">handler</span>: <a href="../interfaces/Listener.html" class="tsd-signature-type tsd-kind-interface">Listener</a><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IGW_FRAME_REQ.html" class="tsd-signature-type tsd-kind-interface">IGW_FRAME_REQ</a><span class="tsd-signature-symbol">&gt;</span></span><div class="tsd-comment tsd-typography"><p>Callback functions that is called for an event</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">filter</span>: <a href="../enums/GatewayCommand.html" class="tsd-signature-type tsd-kind-enum">GatewayCommand</a><span class="tsd-signature-symbol">[]</span></span><div class="tsd-comment tsd-typography"><p>Array of GatewayCommand entries you want to listen to. Optional.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <a href="../interfaces/Disposable.html" class="tsd-signature-type tsd-kind-interface">Disposable</a></h4><p>Returns a Disposable that you can call to remove the handler.</p>
<div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/IConnection.html">IConnection</a>.<a href="../interfaces/IConnection.html#onFrameSent">onFrameSent</a></p><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L381">connection.ts:381</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="sendFrameAsync" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>send<wbr/>Frame<wbr/>Async</span><a href="#sendFrameAsync" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="sendFrameAsync.sendFrameAsync-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">send<wbr/>Frame<wbr/>Async</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">frame</span>, <span class="tsd-kind-parameter">timeout</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IGW_FRAME_RCV.html" class="tsd-signature-type tsd-kind-interface">IGW_FRAME_RCV</a><span class="tsd-signature-symbol">&gt;</span><a href="#sendFrameAsync.sendFrameAsync-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Sends a request frame to the KLF interface.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><span class="tsd-kind-parameter">frame</span>: <a href="../interfaces/IGW_FRAME_REQ.html" class="tsd-signature-type tsd-kind-interface">IGW_FRAME_REQ</a></span><div class="tsd-comment tsd-typography"><p>The frame that should be sent to the KLF interface.</p>
</div><div class="tsd-comment tsd-typography"></div></li><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">timeout</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = 10</span></span><div class="tsd-comment tsd-typography"><p>A timeout in seconds. After the timeout the returned promise will be rejected.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">Promise</span><span class="tsd-signature-symbol">&lt;</span><a href="../interfaces/IGW_FRAME_RCV.html" class="tsd-signature-type tsd-kind-interface">IGW_FRAME_RCV</a><span class="tsd-signature-symbol">&gt;</span></h4><p>Returns a promise with the corresponding confirmation message as value.
                                  In case of an error frame the promise will be rejected with the error number.
                                  If the request frame is a command (with a SessionID) than the promise will be
                                  resolved by the corresponding confirmation frame with a matching session ID.</p>
<div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><p>Implementation of <a href="../interfaces/IConnection.html">IConnection</a>.<a href="../interfaces/IConnection.html#sendFrameAsync">sendFrameAsync</a></p><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L271">connection.ts:271</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="startKeepAlive" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>start<wbr/>Keep<wbr/>Alive</span><a href="#startKeepAlive" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="startKeepAlive.startKeepAlive-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">start<wbr/>Keep<wbr/>Alive</span><span class="tsd-signature-symbol">(</span><span class="tsd-kind-parameter">interval</span><span class="tsd-signature-symbol">?</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#startKeepAlive.startKeepAlive-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Start a keep-alive timer to send a message
at least every [[interval]] minutes to the interface.
The KLF-200 interface will close the connection
after 15 minutes of inactivity.</p>
</div><div class="tsd-parameters"><h4 class="tsd-parameters-title">Parameters</h4><ul class="tsd-parameter-list"><li><span><code class="tsd-tag ts-flagOptional">Optional</code> <span class="tsd-kind-parameter">interval</span>: <span class="tsd-signature-type">number</span><span class="tsd-signature-symbol"> = ...</span></span><div class="tsd-comment tsd-typography"><p>Keep-alive interval in minutes. Defaults to 10 min.</p>
</div><div class="tsd-comment tsd-typography"></div></li></ul></div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L409">connection.ts:409</a></li></ul></aside></li></ul></section><section class="tsd-panel tsd-member"><a id="stopKeepAlive" class="tsd-anchor"></a><h3 class="tsd-anchor-link"><span>stop<wbr/>Keep<wbr/>Alive</span><a href="#stopKeepAlive" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><ul class="tsd-signatures"><li class="tsd-signature tsd-anchor-link"><a id="stopKeepAlive.stopKeepAlive-1" class="tsd-anchor"></a><span class="tsd-kind-call-signature">stop<wbr/>Keep<wbr/>Alive</span><span class="tsd-signature-symbol">(</span><span class="tsd-signature-symbol">)</span><span class="tsd-signature-symbol">: </span><span class="tsd-signature-type">void</span><a href="#stopKeepAlive.stopKeepAlive-1" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></li><li class="tsd-description"><div class="tsd-comment tsd-typography"><p>Stops the keep-alive timer.
If not timer is set nothing happens.</p>
</div><h4 class="tsd-returns-title">Returns <span class="tsd-signature-type">void</span></h4><div class="tsd-comment tsd-typography"><h4>Memberof</h4><p>Connection</p>
</div><aside class="tsd-sources"><ul><li>Defined in <a href="https://github.com/MiSchroe/klf-200-api/blob/410cd96c0bbec3f9024fe23e10819f60ab837550/src/connection.ts#L422">connection.ts:422</a></li></ul></aside></li></ul></section></section></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#constructor" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-512"></use></svg><span>constructor</span></a><a href="#CA" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>CA</span></a><a href="#connectionOptions" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>connection<wbr/>Options</span></a><a href="#fingerprint" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>fingerprint</span></a><a href="#host" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1024"></use></svg><span>host</span></a><a href="#KLF200SocketProtocol" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-262144"></use></svg><span>KLF200<wbr/>Socket<wbr/>Protocol</span></a><a href="#loginAsync" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>login<wbr/>Async</span></a><a href="#logoutAsync" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>logout<wbr/>Async</span></a><a href="#on" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>on</span></a><a href="#onFrameSent" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>on<wbr/>Frame<wbr/>Sent</span></a><a href="#sendFrameAsync" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>send<wbr/>Frame<wbr/>Async</span></a><a href="#startKeepAlive" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>start<wbr/>Keep<wbr/>Alive</span></a><a href="#stopKeepAlive" class=""><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-2048"></use></svg><span>stop<wbr/>Keep<wbr/>Alive</span></a></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="../assets/icons.svg#icon-1"></use></svg><span>klf-200-api</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base=".."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>